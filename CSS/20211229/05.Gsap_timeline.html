<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css"
      integrity="sha512-GQGU0fMMi238uA+a/bdWJfpUGKUkBdgfFdgBm72SUQ6BeyWjoY/ton0tEjH+OSH9iP4Dfh+7HM0I9f5eR0L/4w=="
      crossorigin="anonymous"
    />
    <style>
      body {
        padding-bottom: 300px;
      }

      .box1,
      .box2,
      .box3,
      .box4,
      .box5,
      .box6,
      .box7,
      .box8,
      .box9,
      .box10,
      .box11,
      .box12,
      .box13,
      .box14,
      .box15,
      .box16,
      .box17,
      .box18,
      .box19,
      .box20,
      .box21,
      .box22,
      .box23,
      .box24,
      .box25,
      .box26,
      .box27 {
        height: 50px;
        width: 50px;
        margin: 5px;
        background: #000;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>timeline - 時間軸</h2>
      <ul>
        <li>timeline 是一種用來組織動畫的方式，他是 tween 與其他 timeline 的容器，也是管理動畫的排序工具</li>
      </ul>

      <hr />

      <h3>tween 與 timeline 的差異</h3>
      <h4 class="mt-4">使用 tween 製作佇列動畫</h4>
      <div class="box1"></div>
      <div class="box2"></div>
      <div class="box3"></div>

      <h4 class="mt-4">使用 timeline 製作序列動畫</h4>
      <div class="box4"></div>
      <div class="box5"></div>
      <div class="box6"></div>

      <h3>defaults設定</h3>
      <p>沒有使用 defaults，程式碼重複</p>
      <div class="box7"></div>
      <div class="box8"></div>
      <div class="box9"></div>

      <p>使用 defaults</p>
      <div class="box10"></div>
      <div class="box11"></div>
      <div class="box12"></div>

      <hr />

      <h3>timeline 的 vars 物件設定</h3>
      <p>vars 物件除了可以設定 defaults，還可以設定一些補間動畫相同的屬性</p>
      <div class="box13"></div>
      <div class="box14"></div>
      <div class="box15"></div>

      <hr />

      <h3>timeline 的方法</h3>
      <p>timeline 繼承了 tween 所有方法，也有自己的方法</p>
      <div class="box16"></div>
      <div class="box17"></div>
      <div class="box18"></div>

      <button id="play">play</button>
      <button id="pause">pause</button>
      <button id="resume">resume</button>

      <hr />

      <h3>timeline 的位置(position) 與 標籤(label)</h3>
      <div class="box19"></div>
      <div class="box20"></div>
      <div class="box21"></div>
      <div class="box22"></div>
      <div class="box23"></div>
      <div class="box24"></div>
      <button id="play2" class="mt-2">play</button>
      <button id="playLabel" class="mt-2">播放標籤位置</button>

      <hr />

      <h3 class="mt-4">巢狀時間軸</h3>
      <div class="box25"></div>
      <div class="box26"></div>
      <div class="box27"></div>
      <button id="nested" class="mt-3">開始</button>
    </div>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
      integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"
      integrity="sha512-pax4MlgXjHEPfCwcJLQhigY7+N8rt6bVvWLFyUMuxShv170X53TRzGPmPkZmGBhk+jikR8WBM4yl7A9WMHHqvg=="
      crossorigin="anonymous"
    ></script>
    <script src="./js/gsap.js"></script>
    <script>
      gsap.to('.box1', { x: 500, duration: 1 });
      gsap.to('.box2', { x: 500, duration: 1, delay: 1 });
      gsap.to('.box3', { x: 500, duration: 1, delay: 2 });

      // 使用timeline製作佇列動畫
      // 建立時間軸容器
      const tl1 = gsap.timeline();
      tl1
        .to('.box4', { x: 500, duration: 1 })
        .to('.box5', { x: 500, duration: 1 })
        .to('.box6', { x: 500, duration: 1 });

      const tl2 = gsap.timeline();
      tl2
        .to('.box7', { x: 500, duration: 1, ease: 'back' })
        .to('.box8', { x: 750, duration: 1, ease: 'back' })
        .to('.box9', { x: 1000, duration: 1, ease: 'back' });

      const tl3 = gsap.timeline({
        defaults: {
          duration: 1,
          ease: 'back'
        }
      });

      tl3.to('.box10', { x: 500 }).to('.box11', { x: 750 }).to('.box12', { x: 1000 });

      // timeline 的 vars 物件設定 ------
      const tl4 = gsap.timeline({
        defaults: {
          duration: 1,
          ease: 'power1.inOut'
        },
        delay: 0,
        repeat: 1,
        repeatDelay: 0,
        yoyo: true,
        paused: false
        // repeatRefresh: true
      });

      tl4.to('.box13', { x: '+=100' }).to('.box14', { x: '+=150' }).to('.box15', { x: '+=200' });

      // timeline 的方法
      const tl5 = gsap.timeline({
        defaults: {
          duration: 3
        },
        paused: true
      });
      tl5.to('.box16', { x: 100 }).to('.box17', { x: 200 }).to('.box18', { x: 300 });

      $('#play').on('click', function () {
        tl5.play();
      });
      $('#pause').on('click', function () {
        tl5.pause();
      });
      $('#resume').on('click', function () {
        tl5.resume();
      });

      // timeline 的位置(position) 與 標籤(label)
      const tl6 = gsap.timeline({
        paused: true
      });

      // 01. 插入絕對位置
      // tl6
      //   .to('.box19', { x: 500, duration: 1 })
      //   .to('.box20', { x: 500, duration: 1 })
      //   .to('.box21', { x: 500, duration: 1 }, 6)
      //   .to('.box22', { x: 500, duration: 1 }, 8)
      //   .to('.box23', { x: 500, duration: 1 }, 5)
      //   .to('.box24', { x: 500, duration: 1 }, 10);

      // 02. 插入相對位置
      // tl6
      //   .to('.box19', { x: 500, duration: 1 })
      //   .to('.box20', { x: 500, duration: 1 })
      //   .to('.box21', { x: 500, duration: 1 }, '+=2')
      //   .to('.box22', { x: 500, duration: 1 }, '+=3')
      //   .to('.box23', { x: 500, duration: 1 }, '-=1')
      //   .to('.box24', { x: 500, duration: 1 }, '-=2');

      // 03. 相對於前者的開頭或結尾
      // tl6
      //   .to('.box19', { x: 500, duration: 1 })
      //   .to('.box20', { x: 500, duration: 1 })
      //   .to('.box21', { x: 500, duration: 1 }, '<2')
      //   .to('.box22', { x: 500, duration: 1 }, '<-1')
      //   .to('.box23', { x: 500, duration: 1 }, '>2')
      //   .to('.box24', { x: 500, duration: 1 }, '>-1');

      // $('#play2').on('click', function () {
      //   tl6.play();
      // });

      tl6
        .to('.box19', { x: 500, duration: 1 })
        .to('.box20', { x: 500, duration: 1 })
        .to('.box21', { x: 500, duration: 1 })
        .to('.box22', { x: 500, duration: 1 })
        .to('.box23', { x: 500, duration: 1 })
        .to('.box24', { x: 500, duration: 1 });

      // 使用標籤標記，標籤是一個時間位置
      // 新增標籤用 addLabel
      tl6.addLabel('first', 2).addLabel('second', 5);

      $('#playLabel').on('click', function () {
        tl6.play('first');
      });

      // 巢狀時間軸 -----------------

      // 創立 t1 子時間軸
      function t1() {
        const tl = gsap.timeline();
        tl.to('.box25', {
          x: 500
        });
        return tl;
      }
      // 創立 t2 子時間軸
      function t2() {
        const tl = gsap.timeline();
        tl.to('.box26', {
          x: 750
        });
        return tl;
      }
      // 創立 t3 子時間軸
      function t3() {
        const tl = gsap.timeline();
        tl.to('.box27', {
          x: 500
        });
        return tl;
      }

      // master 主時間軸
      const master = gsap.timeline({ paused: true });
      master.add(t1()).add(t2()).add(t3());
      $('#nested').on('click', function () {
        master.play();
      });
    </script>
  </body>
</html>
